---
import Layout from "../../layouts/Layout.astro";
import teamData from "../../data/team.json";
import MemberCard from "../../components/MemberCard.astro";

export function getStaticPaths() {
    return [{ params: { lang: "es" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params;
const isEs = lang === "es";
---

<Layout title={isEs ? "Equipo - Khipux" : "Team - Khipux"} lang={lang}>
    <section class="pt-32 pb-24 bg-black min-h-screen">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="text-center mb-20">
                <div
                    class="inline-flex items-center gap-3 text-primary-500 font-bold mb-4"
                >
                    <div class="w-12 h-[2px] bg-primary-500"></div>
                    <span class="uppercase tracking-widest text-sm">
                        {isEs ? "Organizaci√≥n" : "Organization"}
                    </span>
                    <div class="w-12 h-[2px] bg-primary-500"></div>
                </div>
                <h1
                    class="text-4xl md:text-5xl lg:text-6xl font-bold text-white font-heading uppercase tracking-tight"
                >
                    {isEs ? "Equipo Organizador" : "Organizing Team"}
                </h1>
                <p
                    class="mt-6 text-lg text-gray-400 max-w-2xl mx-auto leading-relaxed"
                >
                    {
                        isEs
                            ? "Conoce a las personas dedicadas que hacen posible KHIPUx Ilo."
                            : "Meet the dedicated people who make KHIPUx Ilo possible."
                    }
                </p>
            </div>

            <div class="space-y-32">
                {
                    teamData.map((commission) => (
                        <div class="relative">
                            {/* Commission Header */}
                            <div class="flex items-center gap-6 mb-16">
                                <div class="h-px flex-1 bg-gradient-to-r from-transparent via-primary-500/50 to-transparent" />
                                <h2 class="text-2xl md:text-3xl font-bold text-white uppercase tracking-widest text-center px-4 border-l-4 border-primary-500 pl-6">
                                    {isEs
                                        ? commission.name_es
                                        : commission.name_en}
                                </h2>
                                <div class="h-px flex-1 bg-gradient-to-r from-transparent via-primary-500/50 to-transparent" />
                            </div>

                            {/* Main Members */}
                            {commission.members &&
                                commission.members.length > 0 && (
                                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16 justify-items-center mb-16">
                                        {commission.members.map((member) => (
                                            <MemberCard member={member} />
                                        ))}
                                    </div>
                                )}

                            {/* Subgroups */}
                            {commission.subgroups &&
                                commission.subgroups.length > 0 && (
                                    <div class="space-y-16 mt-16 pl-0 md:pl-12 border-l-0 md:border-l border-white/10 ml-0 md:ml-6">
                                        {commission.subgroups.map(
                                            (subgroup) => (
                                                <div class="relative">
                                                    <h3 class="text-lg font-bold text-primary-400 uppercase tracking-widest mb-10 flex items-center gap-4">
                                                        <span class="w-2 h-2 rounded-full bg-primary-500" />
                                                        {isEs
                                                            ? subgroup.name_es
                                                            : subgroup.name_en}
                                                    </h3>
                                                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-12">
                                                        {subgroup.members.map(
                                                            (member) => (
                                                                <MemberCard
                                                                    member={
                                                                        member
                                                                    }
                                                                />
                                                            ),
                                                        )}
                                                    </div>
                                                </div>
                                            ),
                                        )}
                                    </div>
                                )}
                        </div>
                    ))
                }
            </div>
        </div>
    </section>
</Layout>

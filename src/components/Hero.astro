---
import heroData from "../data/hero.json";
import siteData from "../data/site.json";

interface Props {
    locale: string;
}

const { locale } = Astro.props;
const content = heroData[locale as keyof typeof heroData];
const isEs = locale === "es";

// Carousel images (auto-play only, no controls)
const carouselImages = [
    {
        src: "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600&h=600&fit=crop",
        title: "AiMara Lab",
        subtitle: isEs ? "IA para lenguas nativas" : "AI for native languages",
    },
    {
        src: "https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=600&fit=crop",
        title: "KHIPU 2025",
        subtitle: isEs ? "Conferencia de IA" : "AI Conference",
    },
    {
        src: "https://images.unsplash.com/photo-1591453089816-0fbb971b454c?w=600&h=600&fit=crop",
        title: isEs ? "Comunidad Aymara" : "Aymara Community",
        subtitle: isEs ? "Preservación cultural" : "Cultural preservation",
    },
    {
        src: "https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=600&fit=crop",
        title: "Machine Learning",
        subtitle: isEs ? "Tecnología avanzada" : "Advanced technology",
    },
];
---

<section class="relative min-h-screen h-screen pt-16 overflow-hidden bg-black">
    <!-- Decorative elements -->
    <div
        class="absolute top-20 right-0 w-96 h-96 bg-primary-500/10 rounded-full blur-3xl"
    >
    </div>
    <div
        class="absolute bottom-0 left-0 w-72 h-72 bg-primary-500/5 rounded-full blur-3xl"
    >
    </div>

    <div
        class="relative z-10 h-full flex items-center"
        style="max-width: var(--content-max-width, 70%); margin: 0 auto; padding: 0 1rem;"
    >
        <div class="grid lg:grid-cols-2 gap-12 items-center w-full">
            <!-- Left Content -->
            <div class="space-y-8">
                <!-- Event Type Badge -->
                <div
                    class="inline-flex items-center gap-2 px-4 py-2 bg-primary-500/20 rounded-full"
                >
                    <span
                        class="w-2 h-2 bg-primary-500 rounded-full animate-pulse"
                    ></span>
                    <span class="text-sm font-medium text-primary-300"
                        >{content.event_type}</span
                    >
                </div>

                <div>
                    <h1
                        class="text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight"
                    >
                        KHIPUx <span class="text-primary-500">Ilo</span>
                    </h1>
                    <p class="mt-3 text-xl text-gray-400 max-w-lg">
                        {content.description}
                    </p>
                </div>

                <a
                    href="#register"
                    class="inline-flex items-center gap-3 px-8 py-4 bg-primary-500 hover:bg-primary-600 text-white rounded-full font-semibold text-lg shadow-lg shadow-primary-500/30 transition-all hover:shadow-xl hover:shadow-primary-500/40 hover:scale-105"
                >
                    <svg
                        class="w-5 h-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"
                        ></path>
                    </svg>
                    {content.cta_primary}
                </a>

                <!-- Event Info -->
                <div class="flex flex-wrap items-center gap-4">
                    <div class="text-gray-400">
                        <span class="font-medium text-white"
                            >{siteData.location.city} | {
                                siteData.location.country
                            }</span
                        >
                        <br />
                        <span class="text-sm"
                            >{
                                isEs
                                    ? "18 — 19 de Agosto | 2026"
                                    : "August 18 — 19 | 2026"
                            }</span
                        >
                    </div>
                </div>
            </div>

            <!-- Right Side - Auto Image Carousel (no controls) -->
            <div class="relative hidden lg:block">
                <div class="relative">
                    <!-- Stats Card -->
                    <div
                        class="absolute -top-4 -left-4 z-20 bg-black rounded-xl shadow-xl p-4 border border-gray-800"
                    >
                        <div class="flex items-center gap-3">
                            <div
                                class="w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center"
                            >
                                <svg
                                    class="w-5 h-5 text-primary-500"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                >
                                    <path
                                        d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"
                                    ></path>
                                </svg>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-white">
                                    250+
                                </p>
                                <p class="text-xs text-gray-500">
                                    {isEs ? "Participantes" : "Participants"}
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Carousel Container (auto-play only) -->
                    <div
                        class="relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden aspect-square max-w-lg ml-auto transform rotate-3 hover:rotate-0 transition-transform duration-500"
                    >
                        <!-- Carousel Slides -->
                        {
                            carouselImages.map((image, index) => (
                                <div
                                    class={`carousel-slide absolute inset-0 transition-opacity duration-1000 ${index === 0 ? "opacity-100" : "opacity-0"}`}
                                    data-slide={index}
                                >
                                    <img
                                        src={image.src}
                                        alt={image.title}
                                        class="w-full h-full object-cover"
                                        loading={index === 0 ? "eager" : "lazy"}
                                    />
                                    <div class="absolute inset-0 bg-gradient-to-t from-primary-900/80 via-transparent to-transparent" />
                                    <div class="absolute bottom-6 left-6 right-6">
                                        <p class="text-white font-bold text-lg">
                                            {image.title}
                                        </p>
                                        <p class="text-white/80 text-sm">
                                            {image.subtitle}
                                        </p>
                                    </div>
                                </div>
                            ))
                        }
                    </div>

                    <!-- Countries badge -->
                    <div
                        class="absolute -bottom-2 -right-2 z-20 bg-primary-500 rounded-xl shadow-xl p-4"
                    >
                        <div class="flex items-center gap-3 text-white">
                            <svg
                                class="w-8 h-8"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <div>
                                <p class="text-xl font-bold">4</p>
                                <p class="text-xs opacity-80">
                                    {
                                        isEs
                                            ? "Países Aymara"
                                            : "Aymara Countries"
                                    }
                                </p>
                            </div>
                        </div>
                    </div>

                    <div
                        class="absolute -bottom-4 -right-4 w-full h-full border-4 border-primary-500/30 rounded-3xl -z-10"
                    >
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script is:inline>
    // Auto-play carousel (no controls)
    let currentSlide = 0;
    const slides = document.querySelectorAll(".carousel-slide");
    const totalSlides = slides.length;

    function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;

        slides.forEach((slide, i) => {
            if (i === currentSlide) {
                slide.classList.remove("opacity-0");
                slide.classList.add("opacity-100");
            } else {
                slide.classList.remove("opacity-100");
                slide.classList.add("opacity-0");
            }
        });
    }

    // Auto-play every 4 seconds
    setInterval(nextSlide, 4000);
</script>

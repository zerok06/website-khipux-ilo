---
import speakersData from "../data/speakers.json";
import Wrapper from "./Wrapper.astro";

interface Props {
  locale: string;
}

const { locale } = Astro.props;
const isEs = locale === "es";
---

<section id="speakers" class="py-32 bg-black relative overflow-hidden">
  <Wrapper>
    <!-- Header synced with Sponsors Style -->
    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-20 px-4">
      <div>
        <div class="inline-flex items-center gap-3 text-primary-500 font-bold mb-4">
          <div class="w-8 h-[2px] bg-primary-500"></div>
          <span class="uppercase tracking-widest text-xs">
            {isEs ? "Nuestros Expertos" : "Our Experts"}
          </span>
        </div>
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight uppercase tracking-tight">
          Speakers
        </h2>
      </div>
      <a
        href={`/${locale}/speakers`}
        class="inline-flex items-center gap-2 px-8 py-3 border border-white/10 text-white/70 hover:border-primary-500 hover:text-white rounded-full font-bold text-xs tracking-widest transition-all uppercase"
      >
        {isEs ? "Ver todos los speakers" : "See all speakers"}
        <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>

    <!-- Speakers Grid - Restored Circular Design -->
    <div class="relative">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-x-12 gap-y-20">
        {
          speakersData
            .filter((s) => s.type === "keynote" || s.type === "speaker")
            .map((speaker) => (
            <div class="group relative flex flex-col items-center">
              <div class="relative w-40 h-40 md:w-56 md:h-56 mb-8">
                <!-- Decorative Margin Frame (Inverse propagation effect) -->
                <div class="absolute inset-[-25%] z-0 pointer-events-none transition-all duration-700 ease-in-out scale-100 opacity-100 group-hover:scale-50 group-hover:opacity-0 group-hover:rotate-12 origin-center">
                  <img
                    src="/margen.webp"
                    alt=""
                    class="w-full h-full object-contain drop-shadow-[0_0_20px_rgba(216,81,32,0.4)]"
                  />
                </div>
                
                <!-- Circular Image Container -->
                <div class="relative w-full h-full rounded-full overflow-hidden border-4 border-black z-10 shadow-2xl transition-all duration-300 group-hover:scale-105 group-hover:border-primary-500">
                  <img
                    src={speaker.image}
                    alt={speaker.name}
                    class="w-full h-full object-cover object-top transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0"
                    loading="lazy"
                  />
                  
                  {/* Hover Overlay Bio */}
                  <div class="absolute inset-0 bg-primary-600/90 flex flex-col justify-center items-center p-6 text-center z-20 scale-0 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-500 ease-out origin-center rounded-full">
                    <p class="text-[10px] md:text-xs text-white leading-relaxed line-clamp-4 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-100 font-medium">
                      {speaker.bio || (isEs ? "Investigador experto en IA" : "Expert AI Researcher")}
                    </p>
                    <div class="mt-4 w-8 h-px bg-white/30 transform translate-y-4 group-hover:translate-y-0 transition-all duration-500 delay-150"></div>
                  </div>
                </div>
              </div>

              <!-- Speaker Info (Outside for better legibility) -->
              <div class="text-center z-20">
                <h3 class="font-bold text-lg md:text-xl text-white mb-2 group-hover:text-primary-400 transition-colors uppercase tracking-tight">
                  {speaker.name}
                </h3>
                <p class="text-[10px] md:text-xs text-primary-500 font-bold uppercase tracking-[0.2em]">
                  {speaker.role}
                </p>
              </div>
            </div>
          ))
        }
      </div>
    </div>

    <!-- More Coming Indicator -->
    <div class="mt-24 text-center">
      <div class="inline-flex items-center gap-3 py-3 px-6 bg-white/[0.03] border border-white/5 rounded-full">
        <div class="w-1.5 h-1.5 bg-primary-500 rounded-full animate-ping"></div>
        <span class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/40">
          {isEs ? "Nuevos ponentes pr√≥ximamente" : "More speakers coming soon"}
        </span>
      </div>
    </div>
  </Wrapper>
</section>
